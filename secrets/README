# Secrets generation & management

This is a helper for creating and managing secrets. It supports:

- Kubernetes Secrets
- Sealed Secrets
- Vault Secrets (argocd vault plugin)

## Requirements

```sh
kubectl
jq
make
stow
kubeseal # if used
python3
pip3 install -r requirements.txt
```

# How it works

The python script will read all `ARGOFLOW_` variables from your environment as defaults,
then it will define a bunch of tools (Dex, Keycloak, Grafana, etc) using the secrets it needs,
and it will use your requested secrets backed (kubernetes secrets, sealed secrets, vault secrets, etc).

That's it! Give it a try, with, for instance,

```bash
# This is it!
./argoflow.py -f --env-file examples/kind.env
pushd secrets
# If you want to use vault instead, change this command
./argoflow_secrets.py --oauth-type keycloak generated --env-file vault.env
popd
# This unpacks the secrets into the distribution via symlinks
make secrets/generated
make deploy
```


Once you run these
